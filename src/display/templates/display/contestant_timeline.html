{% extends "base.html" %}
{% block head %}
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>

    <script type="text/javascript">
        google.charts.load('current', {'packages': ['timeline']});
        google.charts.setOnLoadCallback(drawChart);

        function drawChart() {
            var container = document.getElementById('timeline');
            var chart = new google.visualization.Timeline(container);
            var rawData = $.ajax({
                url: "/display/navigationtask/{{ navigation_task.pk }}/contestants_timeline_data/",
                dataType: "json",
                async: false
            }).responseJSON
            for (const row of rawData.rows) {
                row.c[2].v = new Date(row.c[2].v)
                row.c[3].v = new Date(row.c[3].v)
            }
            console.log(rawData)
            var dataTable = new google.visualization.DataTable(rawData);
            console.log(dataTable)
            var options = {
                timeline: {
                    groupByRowLabel: true
                }
            }


            chart.draw(dataTable, options);
        }
    </script>
{% endblock %}
{% block content %}
    <div id="timeline" style="height: 800px;"></div>


{% endblock %}